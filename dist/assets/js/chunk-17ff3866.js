(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-17ff3866"],{"0189":function(e,t,a){"use strict";var i=a("5988");a.n(i).a},"0319":function(e,t,a){},"0378":function(e,t,a){"use strict";var i=a("0319");a.n(i).a},5988:function(e,t,a){},c452:function(e,t,a){"use strict";a.r(t);var i=a("6861"),s=a("1086"),r=a("b775"),n=a("3259"),l=a("b166"),o={props:{title:{type:String,default:"详情"}},filters:{formatTime:function(e,t){var a=1<arguments.length&&void 0!==t?t:"yyyy-MM-dd HH:mm:ss";if(e)return Object(l.a)(e,a)}},data:function(){return{visible:!1,detailInfo:{}}},methods:{open:function(e){this.visible=!0,this.detailInfo=e}}},c=(a("0378"),a("2877")),d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"detail-wrapper"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticClass:"detail-info"},[a("div",{staticClass:"user-info mb-ten"},[a("span",[e._v(e._s(e.detailInfo.userName?e.detailInfo.userName:""))]),a("span",[e._v(e._s(e.detailInfo.policeCode?e.detailInfo.policeCode:""))]),a("span",[e._v(e._s(e.detailInfo.department?e.detailInfo.department:""))])]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("预警时间：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("预警原因：")]),a("span")]),a("div",{staticClass:"advice"},[a("p",[e._v("本人反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"}})],1),a("div",{staticClass:"advice"},[a("p",[e._v("层级领导反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"}})],1),a("div",{staticClass:"advice"},[a("p",[e._v("职能部门反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"}})],1)])])],1)])],1)}),[],!1,null,"2910e27f",null).exports,p={components:{HistogramChart:i.default,LineChart:s.default,TraveManagementDetail:d},data:function(){var e=this;return{businessTrip:{data:{columns:["place","num"],rows:[]},labelMap:{num:"出差次数"}},reimburse:{data:{columns:["months","COUNT"],rows:[]},labelMap:{COUNT:"费用"}},searchData:{policeCode:"",userName:"",department:"",startTime:"",endTime:""},searchForm:[{type:"input",prop:"policeCode",width:"120px",placeholder:"警号"},{type:"input",prop:"userName",width:"120px",placeholder:"姓名"},{type:"select",prop:"dept_id",width:"150px",options:[],change:function(){},placeholder:"所属部门"},{type:"daterange",options:[{prop:"startTime",format:"",valueformat:"",placeholder:"起始日期"},{prop:"endTime",format:"",valueformat:"",placeholder:"结束日期"}]}],options:{pageSize:10,hasIndex:!1,currentPage:1,loading:!0,maxHeight:null,height:"500"},columns:[{prop:"policeCode",label:"警号",align:"left"},{prop:"userName",label:"姓名",align:"left"},{prop:"department",label:"部门",align:"left"},{prop:"reimbursementTime",label:"报销时间",align:"left",type:"date",dateFormat:"yyyy-MM-dd"},{prop:"reasons",label:"出差事由",align:"left"},{prop:"startTime",label:"出差时间",align:"left",type:"date",dateFormat:"yyyy-MM-dd"},{prop:"endTime",label:"归队时间",align:"left",type:"date",dateFormat:"yyyy-MM-dd"},{prop:"place",label:"出差地点",align:"left"},{prop:"isException",label:"分析结果",align:"left"}],operates:{width:150,fixed:"right",list:[{id:"1",label:"详情",show:!0,underline:!1,icon:'<i class="el-icon-view"></i>',disabled:!1,method:function(t,a){e.$refs.traveManagementDetail.open(a)},showCallback:function(){return!0}}]},tableList:[],userId:{userId:"2020"}}},methods:{handleSearch:function(e){Object.assign(this.searchData,e),this.query()},afterCurrentPageClickHandle:function(e,t){this.query(e),t()},query:function(e){var t,a=this,i=0<arguments.length&&void 0!==e?e:1;t=Object.assign({nCurrent:i,nSize:10,orderByField:""},this.searchData,this.userId),Object(r.a)({url:n.a.travelManagement.findTravelPage,method:"get",params:t}).then((function(e){var t=e.data.size;return{data:e.data.records,total:e.data.total,size:t}})).then((function(e){a.$refs.recordSpTableRef.setPageInfo(i,e.size,e.total,e.data)}))}},created:function(){var e,t,a=this;e={userId:""},Object(r.a)({url:n.a.travelManagement.tripPlaceStatistics,method:"get",params:e}).then((function(e){return e.data})).then((function(e){for(var t in e)a.businessTrip.data.rows.push({place:t,num:e[t]})})),t={userId:"2020"},Object(r.a)({url:n.a.travelManagement.tripMoneyStatistics,method:"get",params:t}).then((function(e){return e.data})).then((function(e){a.reimburse.data.rows=e})),this.query()}},u=(a("0189"),Object(c.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"content"},[a("el-row",{staticClass:"bg-fff"},[a("el-col",{attrs:{span:12}},[a("HistogramChart",{attrs:{"chart-data":e.businessTrip.data,"label-map":e.businessTrip.labelMap,title:"出差次数"}})],1),a("el-col",{attrs:{span:12}},[a("LineChart",{attrs:{"chart-data":e.reimburse.data,"label-map":e.reimburse.labelMap,title:"费用"}})],1)],1),a("div",{staticClass:"search-wrap"},[a("div",{staticClass:"section-title"},[e._v("查询条件")]),a("e-search",{staticClass:"search-form",attrs:{searchData:e.searchData,searchForm:e.searchForm},on:{handleSearch:e.handleSearch}})],1),a("div",[a("e-table",{ref:"recordSpTableRef",attrs:{options:e.options,columns:e.columns,operates:e.operates,tableList:e.tableList},on:{afterCurrentPageClick:e.afterCurrentPageClickHandle}})],1)],1),a("TraveManagementDetail",{ref:"traveManagementDetail"})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-title"},[a("span",[e._v("报销异常分析")])])}],!1,null,"5eb07b16",null));t.default=u.exports}}]);