(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ff8b5cc"],{"1c31":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"o",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"z",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"h",(function(){return m})),a.d(t,"i",(function(){return h})),a.d(t,"m",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"p",(function(){return g})),a.d(t,"y",(function(){return y})),a.d(t,"l",(function(){return w})),a.d(t,"w",(function(){return O})),a.d(t,"t",(function(){return j})),a.d(t,"s",(function(){return k})),a.d(t,"u",(function(){return I})),a.d(t,"r",(function(){return C})),a.d(t,"x",(function(){return M})),a.d(t,"v",(function(){return x})),a.d(t,"q",(function(){return D})),a.d(t,"k",(function(){return _})),a.d(t,"f",(function(){return T}));var r=a("b775"),n=a("3259");function i(e){return Object(r.a)({url:n.a.report.findInterViewPage,method:"get",params:e})}function o(e){return Object(r.a)({url:n.a.report.getInterViewById,method:"get",params:e})}function s(e){return Object(r.a)({url:n.a.report.deleteInterView,method:"delete",params:e})}function l(e){return Object(r.a)({url:n.a.report.saveInterView,method:"post",data:e})}function c(e){return Object(r.a)({url:n.a.report.findReportPage,method:"get",params:e})}function d(e){return Object(r.a)({url:n.a.post.treeAndUser,method:"get",params:e})}function u(e){return Object(r.a)({url:n.a.post.findWorknotePage,method:"get",params:e})}function p(e){return Object(r.a)({url:n.a.post.countWorkNote,method:"get",params:e})}function f(e){return Object(r.a)({url:n.a.post.noteAduit,method:"post",params:e})}function m(e){return Object(r.a)({url:n.a.post.getRiskByUserId,method:"get",params:e})}function h(e){return Object(r.a)({url:n.a.post.getUserList,method:"get",params:e})}function b(e){return Object(r.a)({url:n.a.report.saveDeclareExit,method:"post",data:e})}function v(e){return Object(r.a)({url:n.a.report.saveDeclareHouse,method:"post",data:e})}function g(e){return Object(r.a)({url:n.a.report.saveMarrage,method:"post",data:e})}function y(e){return Object(r.a)({url:n.a.report.saveWeddingBanquet,method:"post",data:e})}function w(e){return Object(r.a)({url:n.a.report.saveCashGift,method:"post",data:e})}function O(e){return Object(r.a)({url:n.a.report.saveRelativesWork,method:"post",data:e})}function j(e){return Object(r.a)({url:n.a.report.saveRelativesAbroad,method:"post",data:e})}function k(e){return Object(r.a)({url:n.a.report.saveOverseasInvestment,method:"post",data:e})}function I(e){return Object(r.a)({url:n.a.report.saveRelativesBusiness,method:"post",data:e})}function C(e){return Object(r.a)({url:n.a.report.saveOverseasDeposit,method:"post",data:e})}function M(e){return Object(r.a)({url:n.a.report.saveSecuredLoan,method:"post",data:e})}function x(e){return Object(r.a)({url:n.a.report.saveRelativesIllegal,method:"post",data:e})}function D(e){return Object(r.a)({url:n.a.report.saveOtherReport,method:"post",data:e})}function _(e){return Object(r.a)({url:n.a.report.saveAffairApply,method:"post",data:e})}function T(e){return Object(r.a)({url:n.a.report.getApprovalById,method:"get",params:e})}},"2da1":function(e,t,a){},5325:function(e,t,a){},"5b30":function(e,t,a){"use strict";var r=a("5325");a.n(r).a},"7a74":function(e,t,a){"use strict";var r=a("2da1");a.n(r).a},eb3a:function(e,t,a){"use strict";a.r(t);var r=a("1c31"),n=(a("a4d3"),a("99af"),a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),i=a("3a58"),o=a("2f62");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var l={data:function(){return{title:"新增谈话",disabled:!1,opeart:"",visible:!1,form:{deptId:"",userId:"",type:"",time:"",interviewMan:"",content:""},config:{value:"id",label:"name",children:"childrens",disabled:!0},options:[{value:1,label:"谈话谈心"},{value:2,label:"家庭走访"},{value:3,label:"约谈提醒"},{value:4,label:"帮助教育"},{value:5,label:"其他"}],interviewMans:[],files:[],orgName:"",realName:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(o.c)(["orgData"])),methods:{open:function(e,t){this.opeart=e,this.visible=!0,"view"===e?(this.title="详情",this.disabled=!0,this.getDetail(t)):"add"===e?(this.title="新增谈话",this.disabled=!1):"update"===e&&(this.title="修改",this.disabled=!1,this.getDetail(t))},colseHandle:function(){this.$refs.form.resetFields()},getDetail:function(e){var t=this,a={id:e.id};Object(r.g)(a).then((function(e){e.success&&(t.form.deptId=e.data.deptId,t.form.userId=e.data.userId,t.form.type=e.data.interviewType,t.form.time=e.data.interviewTime,t.form.interviewMan=e.data.interviewMan,t.form.content=e.data.interviewContent)}))},selectChange:function(e){var t=this;this.interviewMans.map((function(a){a.id===e&&(t.realName=a.realName)}))},orgChange:function(e){var t=this.deepQuery(e);this.orgName=t.name,this.getUserListData(e)},deepQuery:function(e){var t=this.orgData,a=[];for(a=a.concat(t);a.length;){var r=a.shift();if(r.childrens&&(a=r.childrens.concat(a)),e===r.id)return r}},getUserListData:function(e){var t=this,a={orgId:e};Object(i.g)(a).then((function(e){e.success&&e.data&&0<e.data.length&&(t.interviewMans=e.data)}))},changeHandler:function(e){this.files=e},onSubmit:function(e){var t,a=this;t="add"===e?"添加":"修改";var n=new FormData;n.append("userId",this.form.userId),n.append("userName",this.realName),n.append("deptId",this.form.deptId),n.append("deptName",this.orgName),n.append("type",this.form.type),n.append("interviewMan",this.form.interviewMan),n.append("time",this.form.time),n.append("content",this.form.content),this.files.forEach((function(e){n.append("file",e.raw)})),Object(r.o)(n).then((function(e){e.success?(a.$message({type:"success",message:"".concat(t,"成功")}),a.$emit("query")):a.$message({type:"warning",message:"".concat(t,"失败")}),a.visible=!1}))}}},c=(a("5b30"),a("2877")),d={name:"IndividualReport",components:{TalkModal:Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px"},on:{"update:visible":function(t){e.visible=t},close:e.colseHandle}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"部门",prop:"deptId"}},[a("select-tree",{attrs:{disabled:e.disabled,props:e.config,treeData:e.orgData,placeholder:"请选择部门"},on:{change:e.orgChange},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1),a("el-form-item",{attrs:{label:"被谈话人",prop:"userId"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.disabled},on:{change:e.selectChange},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.interviewMans,(function(e){return a("el-option",{key:e.id,attrs:{label:e.realName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"谈话类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.disabled},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"谈话时间",prop:"time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled,"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),a("el-form-item",{attrs:{label:"访谈人",prop:"interviewMan"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.form.interviewMan,callback:function(t){e.$set(e.form,"interviewMan",t)},expression:"form.interviewMan"}})],1),a("el-form-item",{attrs:{label:"谈话类容",prop:"content"}},[a("el-input",{attrs:{disabled:e.disabled,type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"附件"}},[a("e-upload",{on:{changeHandler:e.changeHandler}})],1),a("div",{staticStyle:{"text-align":"center"}},["view"===e.opeart?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("确认")]):e._e(),"add"===e.opeart?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.onSubmit("add")}}},[e._v("保存")]):e._e(),"update"===e.opeart?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.onSubmit("update")}}},[e._v("保存")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"30403d90",null).exports},data:function(){var e=this;return{userId:"5ba98b66cd3549b9b92ea8723e89207e",addForm:"/TalkAdd",btnsConfig:{showAdd:!0},searchData:{userName:"",department:"",startTime:"",endTime:"",policeCode:""},searchForm:[{label:"姓名：",type:"input",prop:"userName",width:"120px",placeholder:""},{label:"警号：",type:"input",prop:"policeCode",width:"120px",placeholder:""},{label:"所属部门：",type:"select",prop:"department",width:"150px",options:[{label:"治安部门",value:"0"},{label:"交通管理部门",value:"1"}],change:function(){},placeholder:"所属部门"},{label:"筛选时间：",type:"daterange",options:[{prop:"startTime",format:"yyyy-MM-dd",valueformat:"yyyy-MM-dd",placeholder:"起始时间"},{prop:"endTime",format:"yyyy-MM-dd",valueformat:"yyyy-MM-dd",placeholder:"结束时间"}]}],tableList:[],options:{pageSize:10,hasIndex:!1,currentPage:1,loading:!0,maxHeight:null,height:"550"},columns:[{prop:"interviewTime",label:"谈话时间",align:"left"},{prop:"interviewMan",label:"被谈话人",align:"left"},{prop:"userName",label:"谈话领导",align:"left"},{prop:"interviewType",formatter:"interviewType_formatter",options:{1:"谈话谈心",2:"家庭走访",3:"约谈提醒",4:"帮助教育",5:"其他"},label:"谈话类型",align:"left"},{prop:"deptName",label:"所属部门",align:"left"}],operates:{width:200,fixed:"right",list:[{id:"1",label:"详情",show:!0,underline:!1,icon:'<i class="el-icon-view"></i>',disabled:!1,method:function(t,a){e.$refs.talkModal.open("view",a)},showCallback:function(){return!0}},{id:"2",label:"修改",show:!0,underline:!1,icon:'<i class="el-icon-edit-outline"></i>',disabled:!1,method:function(t,a){e.$refs.talkModal.open("update",a)},showCallback:function(){return!0}},{id:"3",label:"删除",show:!0,underline:!1,icon:'<i class="el-icon-delete"></i>',disabled:!1,method:function(t,a){var n=e;n.$confirm("是否删除？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then((function(){Object(r.b)({id:a.id}).then((function(e){try{e.success&&(n.$message({type:"success",message:"删除成功"}),n.init())}catch(e){}}))})).catch((function(){}))},showCallback:function(){return!0}}]}}},watch:{},mounted:function(){this.init()},methods:{init:function(){this.query()},interviewType_formatter:function(e,t,a){return t.options[a]},handleSearch:function(e){Object.assign(this.searchData,e),this.query()},afterCurrentPageClickHandle:function(e,t){this.query(e),t()},query:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:1;Object(r.c)(Object.assign({nCurrent:a,nSize:10,userId:this.userId,isAsc:!1,orderByField:"interviewTime"},this.searchData)).then((function(e){t.$refs.recordTalksTableRef.setPageInfo(a,e.data.size,e.data.total,e.data.records)}))},addClickHandle:function(){this.$refs.talkModal.open("add")}}},u=(a("7a74"),Object(c.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"search-wrap"},[a("div",{staticClass:"section-title"},[e._v("查询条件")]),a("e-search",{staticClass:"search-form",attrs:{searchData:e.searchData,searchForm:e.searchForm,btnsConfig:e.btnsConfig},on:{handleSearch:e.handleSearch,addClickHandle:e.addClickHandle}})],1),a("div",[a("e-table",{ref:"recordTalksTableRef",attrs:{tableList:e.tableList,options:e.options,columns:e.columns,operates:e.operates},on:{afterCurrentPageClick:e.afterCurrentPageClickHandle}})],1)]),a("talk-modal",{ref:"talkModal",on:{query:e.query}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-title"},[t("span",[this._v("谈话谈心")])])}],!1,null,"c16aaf8e",null));t.default=u.exports}}]);