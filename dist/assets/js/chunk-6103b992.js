(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6103b992"],{"33e4":function(e,t,a){"use strict";var n=a("cff7");a.n(n).a},"715a":function(e,t,a){"use strict";a.r(t),a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var n=a("ade3"),s=a("afb1"),i=a("b166"),l={props:{title:{type:String,default:"车辆轨迹详情"}},filters:{formatTime:function(e,t){var a=1<arguments.length&&void 0!==t?t:"yyyy-MM-dd HH:mm:ss";if(e)return Object(i.a)(e,a)}},data:function(){return{visible:!1,detailInfo:{}}},methods:{open:function(e){this.visible=!0,this.getDetailInfo(e)},getDetailInfo:function(e){var t=this,a={flow_id:e.flowId,car_number:e.carNumber};Object(s.o)(a).then((function(e){e.success?t.detailInfo=e.data:t.$message({type:"warning",message:e.message})}))}}},o=(a("719e"),a("2877")),r=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"detail-wrapper"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticClass:"detail-info"},[a("div",{staticClass:"user-info mb-ten"},[a("span",[e._v(e._s(e.detailInfo.userName?e.detailInfo.userName:""))]),a("span",[e._v(e._s(e.detailInfo.policeCode?e.detailInfo.policeCode:""))]),a("span",[e._v(e._s(e.detailInfo.department?e.detailInfo.department:""))])]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("申请时间：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("用车时间：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("还车时间：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("事由：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("审批人：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("审批时间：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("审批结果：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("是否异常：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("异常原因：")]),a("span")]),a("div",{staticClass:"mb-ten"},[a("span",[e._v("预警时间：")]),a("span")]),a("div",{staticClass:"advice"},[a("p",[e._v("本人反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.detailInfo.content,callback:function(t){e.$set(e.detailInfo,"content",t)},expression:"detailInfo.content"}})],1),a("div",{staticClass:"advice"},[a("p",[e._v("层级领导反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.detailInfo.leaderAdvice,callback:function(t){e.$set(e.detailInfo,"leaderAdvice",t)},expression:"detailInfo.leaderAdvice"}})],1),a("div",{staticClass:"advice"},[a("p",[e._v("职能部门反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:e.detailInfo.branchAdvice,callback:function(t){e.$set(e.detailInfo,"branchAdvice",t)},expression:"detailInfo.branchAdvice"}})],1)])])],1)])],1)}),[],!1,null,"339bdf54",null).exports,c=a("2f62");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var p={components:{CoordinateInfo:r},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(c.c)(["userId"])),data:function(){var e=this;return{violationTitle:{text:"违规用车按人名统计"},violationTimesHistogram:{columns:["user_name","warnnum"],rows:[]},violationSettings:{labelMap:{warnnum:"违规次数"}},monthlyTitle:{text:"违规用车按月统计",left:"center"},monthlyData:{columns:["everymonth","warnnum"],rows:[]},monthlyExtend:{series:{smooth:!1}},monthlySettings:{labelMap:{warnnum:"违规次数"}},searchData:{userName:"",policeCode:"",department:"",startTime:"",endTime:""},searchForm:[{type:"input",prop:"policeCode",width:"120px",placeholder:"警号"},{type:"input",prop:"userName",width:"120px",placeholder:"姓名"},{type:"select",prop:"department",width:"150px",options:[{label:"治安部门",value:"0"},{label:"交通管理部门",value:"1"}],change:function(){},placeholder:"所属部门"},{type:"daterange",options:[{prop:"startTime",format:"",valueformat:"",placeholder:"起始时间"},{prop:"endTime",format:"",valueformat:"",placeholder:"结束时间"}]}],tableList:[],options:{pageSize:10,hasIndex:!1,currentPage:1,loading:!0,maxHeight:null,height:"500"},columns:[{prop:"policeCode",label:"警号",align:"left"},{prop:"userName",label:"使用人",align:"left"},{prop:"department",label:"所属部门",align:"left"},{prop:"carNumber",label:"车牌号",align:"left"},{prop:"actualStartTime",label:"用车时间",align:"left",type:"date"},{prop:"actualEndTime",label:"还车时间",align:"left",type:"date"},{prop:"isException",label:"是否异常",align:"left"}],operates:{width:150,fixed:"right",list:[{id:"1",label:"详情",show:!0,underline:!1,icon:'<i class="el-icon-view"></i>',disabled:!1,method:function(t,a){e.$refs.coordinateInfo.open(a)},showCallback:function(){return!0}}]}}},methods:{handleSearch:function(e){Object.assign(this.searchData,e),this.query()},afterCurrentPageClickHandle:function(e,t){this.query(e),t()},query:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:1;Object(s.j)(Object.assign({nCurrent:a,nSize:10,userId:this.userId,role:"123",recordPlace:""},this.searchData)).then((function(e){t.$refs.recordSpTableRef.setPageInfo(a,e.data.size,e.data.total,e.data.records)}))},getMonthIllUsecarStatistics:function(){var e=this,t={userId:this.userId,deptId:"111",role:"111"};Object(s.B)(t).then((function(t){var a=t.data;t.success&&a&&0<a.length&&(a.forEach((function(e){e.everymonth=e.everymonth+"月"})),e.monthlyData.rows=a)}))},getIllUsecarHumanStatistics:function(){var e=this,t={userId:this.userId,deptId:"111",role:"111"};Object(s.w)(t).then((function(t){t.success&&(e.violationTimesHistogram.rows=t.data)}))}},mounted:function(){this.getMonthIllUsecarStatistics(),this.getIllUsecarHumanStatistics(),this.query()}},u=(a("33e4"),Object(o.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"content"},[a("el-row",{staticClass:"bg-fff"},[a("el-col",{attrs:{span:12}},[a("e-histogram",{attrs:{chartSettings:e.violationSettings,title:e.violationTitle,chartData:e.violationTimesHistogram}})],1),a("el-col",{attrs:{span:12}},[a("ve-line",{attrs:{title:e.monthlyTitle,data:e.monthlyData,extend:e.monthlyExtend,settings:e.monthlySettings,"legend-visible":!1}})],1)],1),a("div",{staticClass:"search-wrap"},[a("div",{staticClass:"section-title"},[e._v("查询条件")]),a("e-search",{staticClass:"search-form",attrs:{searchData:e.searchData,searchForm:e.searchForm},on:{handleSearch:e.handleSearch}})],1),a("div",[a("e-table",{ref:"recordSpTableRef",attrs:{tableList:e.tableList,options:e.options,columns:e.columns,operates:e.operates},on:{afterCurrentPageClick:e.afterCurrentPageClickHandle}})],1)],1),a("coordinate-info",{ref:"coordinateInfo"})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-title"},[a("span",[e._v("违规车管控")])])}],!1,null,"b9f0bbbe",null));t.default=u.exports},"719e":function(e,t,a){"use strict";var n=a("a8bc");a.n(n).a},a8bc:function(e,t,a){},cff7:function(e,t,a){}}]);