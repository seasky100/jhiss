(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-643acf84"],{4288:function(t,e,a){"use strict";a.r(e),a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var i=a("ade3"),n=a("afb1"),s=a("b166"),r={props:{title:{type:String,default:"违规查询预警详情"}},filters:{formatTime:function(t,e){var a=1<arguments.length&&void 0!==e?e:"yyyy-MM-dd HH:mm:ss";if(t)return Object(s.a)(t,a)}},data:function(){return{visible:!1,detailInfo:{}}},methods:{open:function(t){this.visible=!0,this.getDetailInfo(t)},getDetailInfo:function(t){var e=this,a={userId:t.userId,deptId:t.id};Object(n.t)(a).then((function(t){t.success&&(e.detailInfo=t.data)}))}}},l=(a("b70a"),a("2877")),o=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("div",{staticClass:"detail-wrapper"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticClass:"detail-info"},[a("div",{staticClass:"user-info mb-ten"},[a("span",[t._v(t._s(t.detailInfo.userName?t.detailInfo.userName:""))]),a("span",[t._v(t._s(t.detailInfo.policeCode?t.detailInfo.policeCode:""))]),a("span",[t._v(t._s(t.detailInfo.department?t.detailInfo.department:""))])]),a("div",{staticClass:"advice"},[a("p",[t._v("本人反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:t.detailInfo.content,callback:function(e){t.$set(t.detailInfo,"content",e)},expression:"detailInfo.content"}})],1),a("div",{staticClass:"advice"},[a("p",[t._v("层级领导反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:t.detailInfo.leaderAdvice,callback:function(e){t.$set(t.detailInfo,"leaderAdvice",e)},expression:"detailInfo.leaderAdvice"}})],1),a("div",{staticClass:"advice"},[a("p",[t._v("职能部门反馈：")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入内容"},model:{value:t.detailInfo.branchAdvice,callback:function(e){t.$set(t.detailInfo,"branchAdvice",e)},expression:"detailInfo.branchAdvice"}})],1)])])],1)])],1)}),[],!1,null,"b1481828",null).exports,c=a("2f62");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}var u={components:{ViolationInfo:o},data:function(){var t=this;return this.chartExtend={series:{smooth:!1}},{searchData:{userName:"",policeCode:"",department:"",problemType:"",startTime:"",endTime:""},searchForm:[{type:"input",prop:"policeCode",width:"120px",placeholder:"警号"},{type:"input",prop:"userName",width:"120px",placeholder:"姓名"},{type:"input",prop:"reason",width:"120px",placeholder:"预警原因"},{type:"daterange",options:[{prop:"startTime",format:"",valueformat:"",placeholder:"起始时间"},{prop:"endTime",format:"",valueformat:"",placeholder:"结束时间"}]},{type:"select",prop:"dept_id",width:"150px",options:[{label:"治安部门",value:"0"},{label:"交通管理部门",value:"1"}],change:function(){},placeholder:"所属部门"},{type:"select",prop:"response",width:"150px",options:[{label:"否",value:0},{label:"是",value:1}],change:function(){},placeholder:"是否反馈"}],tableList:[],options:{pageSize:10,hasIndex:!(this.chartSettings={labelMap:{warnnum:"次数"}}),currentPage:1,loading:!0,maxHeight:null,height:"500"},columns:[{prop:"policeCode",label:"警号",align:"left"},{prop:"userName",label:"姓名",align:"left"},{prop:"department",label:"所属部门",align:"left"},{prop:"warnTime",label:"预警时间",align:"left",type:"date",dateFormat:"yyyy-MM-dd"},{prop:"warnReason",label:"预警原因",align:"left"},{prop:"content",label:"反馈内容",align:"left"},{prop:"warnLevel",label:"预警级别",align:"left"}],operates:{width:150,fixed:"right",list:[{id:"1",label:"详情",show:!0,underline:!1,icon:'<i class="el-icon-view"></i>',disabled:!1,method:function(e,a){t.$refs.violationInfo.open(a)},showCallback:function(){return!0}}]},warnStatusTitle:{text:"被查询系统次数"},warnStatusSettings:{labelMap:{num:"次数"}},warnStatusStatistics:{columns:["status","num"],rows:[]},humanStatistics:{columns:["user_name","warnnum"],rows:[]},title:{text:"次数统计",left:"center"}}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(c.c)(["userId"])),methods:{handleSearch:function(t){Object.assign(this.searchData,t),this.query()},afterCurrentPageClickHandle:function(t,e){this.query(t),e()},getHumanStatistics:function(){var t=this,e={userId:this.userId};Object(n.s)(e).then((function(e){e.success&&(t.humanStatistics.rows=e.data)}))},getWarnStatusStatistics:function(){var t=this,e={userId:this.userId};Object(n.v)(e).then((function(e){if(e.success&&e.data){var a=[];for(var i in e.data)a.push({status:i,num:e.data[i]});t.warnStatusStatistics.rows=a}}))},query:function(t){var e=this,a=0<arguments.length&&void 0!==t?t:1;Object(n.u)(Object.assign({nCurrent:a,nSize:10,user_id:this.userId,isAsc:!1,orderByField:"warnTime",role:10,warnType:4},this.searchData)).then((function(t){e.$refs.recordSpTableRef.setPageInfo(a,t.data.size,t.data.total,t.data.records)}))}},mounted:function(){this.getHumanStatistics(),this.getWarnStatusStatistics(),this.query()}},p=(a("e857"),Object(l.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._m(0),a("div",{staticClass:"content"},[a("el-row",{staticClass:"bg-fff"},[a("el-col",{attrs:{span:12}},[a("e-histogram",{attrs:{chartSettings:t.warnStatusSettings,title:t.warnStatusTitle,chartData:t.warnStatusStatistics}})],1),a("el-col",{attrs:{span:12}},[a("ve-line",{attrs:{title:t.title,data:t.humanStatistics,extend:t.chartExtend,settings:t.chartSettings,"legend-visible":!1}})],1)],1),a("div",{staticClass:"search-wrap"},[a("div",{staticClass:"section-title"},[t._v("查询条件")]),a("e-search",{staticClass:"search-form",attrs:{searchData:t.searchData,searchForm:t.searchForm},on:{handleSearch:t.handleSearch}})],1),a("div",[a("e-table",{ref:"recordSpTableRef",attrs:{tableList:t.tableList,options:t.options,columns:t.columns,operates:t.operates},on:{afterCurrentPageClick:t.afterCurrentPageClickHandle}})],1)],1),a("violation-info",{ref:"violationInfo"})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-title"},[a("span",[t._v("违规查询预警管控")])])}],!1,null,"2f92f632",null));e.default=p.exports},a302:function(t,e,a){},b70a:function(t,e,a){"use strict";var i=a("a302");a.n(i).a},c905:function(t,e,a){},e857:function(t,e,a){"use strict";var i=a("c905");a.n(i).a}}]);